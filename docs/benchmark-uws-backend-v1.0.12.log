
> dynapm@1.0.12 benchmark /home/gs/opensource_code/DynaPM
> tsx test/benchmark.ts


🚀 DynaPM 性能测试
✓ 网关未运行，准备测试
ℹ 启动 DynaPM 网关...
✓ 网关已启动

============================================================
冷启动性能测试
============================================================
✓ 冷启动成功，总耗时: 173ms
  DynaPM 开销: ~25ms (启动命令 + 端口等待)
  服务启动时间: ~148ms (Node.js 应用)

============================================================
流式代理延迟测试
============================================================
✓ 流式代理延迟测试完成 (10 次请求)
  平均延迟: 10.2ms
  最小延迟: 9ms
  最大延迟: 12ms
  延迟范围: 9ms - 12ms

============================================================
网关吞吐量测试（多服务混合压测）
============================================================
ℹ 启动多个测试服务...
ℹ 运行网关压测 (3 个服务混合流量，150 总并发)...
ℹ 每个服务 50 并发，同时压测 3 个服务
ℹ 使用压测工具: autocannon

✓ 网关吞吐量测试完成

  网关总 QPS: 4832 req/s
  测试服务数: 3
  每服务并发数: 50
  总并发数: 150
  测试时长: 5 秒

  各服务 QPS 详情:
    - app1.test: 1676.0 req/s
    - app2.test: 1580.0 req/s
    - app3.test: 1576.0 req/s

  这是网关同时处理 3 个不同服务的真实性能
  提示: 使用 wrk 可以获得更准确的压测结果

============================================================
性能测试完成
============================================================
✓ 所有测试已通过，数据已记录在上方

============================================================
清理环境
============================================================
✓ 已清理所有测试进程
